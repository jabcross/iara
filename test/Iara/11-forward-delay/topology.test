// RUN: export SCHEDULER_MODE=$SCHEDULER_MODE
// RUN: pwd >&2
// RUN: build-single-test.sh .
// RUN: pwd >&2
// RUN: ls build >&2
// RUN: ./build/a.out > ./build/output.txt
// RUN: FileCheck %s < ./build/output.txt

// forward delay

// Two nodes

iara.actor @run  {
  %0 = iara.node @a out: tensor<9xi32>
  %1 = iara.edge %0 : tensor<9xi32> -> tensor<3xi32> {delay = array<i32: 100, 101, 102>}
  %2 = iara.node @b in %1: tensor<3xi32> out:tensor<3xi32>
  %3 = iara.edge %2 : tensor<3xi32> -> tensor<9xi32>
  iara.node @c in %3: tensor<9xi32>
} { }

// First iteration consumes delay and then values generated by A
// CHECK: {{^ *}}100 101 102 0 1 2 3 4 5{{ *$}}
// CHECK: {{^ *}}6 7 8 0 1 2 3 4 5{{ *$}}
